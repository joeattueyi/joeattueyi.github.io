<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>why joe? seriously, why? by joeattueyi</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>why joe? seriously, why?</h1>
        <h2>jattueyi@gmail.com</h2>

        <section id="downloads">
          <a href="https://github.com/joeattueyi" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <hr>

<pre><code>var l = function(){
    console.log.apply(null, ([].slice.call(arguments)))
}

var gen_id = function(){
    return Date.now() + Math.random(Math.random() * 10000000);
}


function fibre(){

    return {id: gen_id(), context: {}, active: false, body: null};
}


function lib_fibre(){
    var fibre_q = {};


    return{
        gen_id : function(){
            return Math.floor(Math.random() * 10000000);
        },
        spawn: function(fn){
            _f = fibre();
            _f.body = fn();
            fibre_q[_f.id] = _f;
        },

        go: function(){
            while (Object.keys(fibre_q).length &gt; 0){
                //l(fibre_q);
                for(var v in fibre_q){
                    //l(v , fibre_q[v] );
                    var fn = fibre_q[v].body;
                    //l(fn);
                    var ref = fn.next();
                    //l(ref);

                    if(ref.done){ 
                        //l("in delete"); 
                        delete fibre_q[v];
                    }
                    //fibre_q[v].body = fn.next;

                }
            } 
        },
    };
}


var lf = lib_fibre();

var a = function *(){
    yield l("Hi");
    yield l("Joe");
    yield l("Welcome");
    yield l("!!!!!!");
}
var b = function *(){
    var x = 10;

    while (x &gt; 0){
        yield l(x);
        x -= 1;
    }
}
var c = function *(){
    yield l("END");
}

lf.spawn(c);

lf.spawn(a);

lf.spawn(b);
lf.go();



</code></pre>

<hr>

<hr>

<h3>
<a id="i-wrote-a-lisp" class="anchor" href="#i-wrote-a-lisp" aria-hidden="true"><span class="octicon octicon-link"></span></a>I WROTE A LISP</h3>

<p>A few weeks ago, i spent some time writing a Lisp in Javascript. This was due to having enjoyed writing Clojure and researching Lisps in general. I watched a few of the SICP lectures online and read Peter Norvig's <a href="http://norvig.com/lispy.html">How to Write a Lisp Interpreter in Python</a> for some pointers and went on my way.</p>

<p>The lisp which I've imaginatively named Joelisp is a bit different to standard Lisps in terms of syntax as it inherits a lot of Clojure syntax and also uses <a href="https://github.com/swannodette/mori">mori's</a> data structures. </p>

<p>It differs from most Lisps in that I have special semantics for evaluating code in depth first order. Code wrapped in an rx function will figure out the implicit dependency graph in your code and will run your code in topologically sorted order.</p>

<p>This kind of feature would be useful for doing reactive programming as it ensures that the values in variables propagate through the whole program even after the variable is mutated. </p>

<p>It also lets you make forward declarations on variables that don't exist yet which is pretty handy.</p>

<p>An example use of the rx tag is</p>

<pre><code>(rx 
    (def c (+ a b))
    (def d (* a b c))
    (def b (+ a 1))
    (def a 1)
    (set! a 100)
   )

(print a)
(print b)
(print c)
(print d)

</code></pre>

<p>returns you </p>

<pre><code>100
101
201
2030100
</code></pre>

<p>pretty cool huh!</p>

<hr>

<hr>

<h3>
<a id="hes-back" class="anchor" href="#hes-back" aria-hidden="true"><span class="octicon octicon-link"></span></a>HE'S BACK</h3>

<pre><code>$ say "why joe???"
</code></pre>

<p>I'm coming out of blogging retirement trying to relive the glory days of the late 00s/early 10s. I can hear u asking why anyone would want to do that, and i'm not sure why either but hopefully we can find out together.</p>

<p>Til next time </p>

<hr>
      </section>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-46776176-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>